{# @pebvariable name="context" type="com.procurement.formsservice.model.fs.Data" #}
{# @pebvariable name="additionalIdentifier" type="com.procurement.formsservice.model.fs.Buyer.AdditionalIdentifier" #}
{
{% import "../macros/translate" %}
{% import "../macros/commaIf" %}
{% import "../macros/attributeIf" %}
  "schema": {
    "title": "Funding Source Creation",
    "type": "object",
    "properties": {
      "fsParent": {
        "title": "New Source of Financing for",
        "description": "Readonly information about parent Expenditure Item",
        "type": "object",
        "properties": {
          "eiOCID": {
            "title": "ID",
            "type": "string",
            "readOnly": true
          },
          "eiTitle": {
            "title": "Expenditure Item",
            "type": "string",
            "readOnly": true
          },
          "eiDescription": {
            "title": "Description",
            "type": "string",
            "readOnly": true
          },
          "eiBudgetPeriod": {
            "title": "Procuring Period",
            "type": "object",
            "properties": {
              "startDate": {
                "title": "Start Date",
                "type": "string",
                "readOnly": true
              },
              "endDate": {
                "title": "End date",
                "type": "string",
                "readOnly": true
              }
            }
          },
          "eiClassification": {
            "title": "eiClassification",
            "type": "object",
            "properties": {
              "scheme": {
                "title": "Classification scheme",
                "type": "string",
                "readOnly": true
              },
              "id": {
                "title": "CPV code",
                "type": "string",
                "readOnly": true
              },
              "description": {
                "title": "CPV name",
                "type": "string",
                "readOnly": true
              }
            }
          }
        }
      },
      "fsFunding": {
        "title": "Funding",
        "type": "object",
        "properties": {
                      {% if context.parameters.funder == "BUYER" %}
                        "fsFunder": {
                          "title": "Source of money - Own Money",
                          "description": "Budget provided by buyer from parent EI",
                          "type": "object",
                          "properties": {
                            "buyer": {
                              "type": "object",
                              "required": [
                                "name"
                              ],
                              "properties": {
                                "name": {
                                  "title": "Official Name",
                                  "type": "string",
                                  "readOnly": true,
                                  "ocds": "buyer::object/name::string"
                                },
                                "address": {
                                  "title": "Address",
                                  "type": "object",
                                  "properties": {
                                    "location": {
                                      "title": "Location",
                                      "type": "object",
                                      "properties": {
                                        "country": {
                                          "title": "Country",
                                          "type": "object",
                                          "source": "{{ context.uris.country }}",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "buyer::object/address::object/addressDetails::object/country::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "buyer::object/address::object/addressDetails::object/country::object/description::string"
                                            }
                                          }
                                        },
                                        "region": {
                                          "title": "Region",
                                          "type": "object",
                                          "source": "{{ context.uris.region }}",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "buyer::object/address::object/addressDetails::object/region::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "buyer::object/address::object/addressDetails::object/region::object/description::string"
                                            }
                                          }
                                        },
                                        "locality": {
                                          "type": "object",
                                          "required": [
                                            "localityType"
                                          ],
                                          "properties": {
                                            "localityType": {
                                              "type": "string",
                                              "enum": [
                                                "From the directory",
                                                "Other"
                                              ],
                                              "readOnly": true
                                            }
                                          },
                                          "dependencies": {
                                            "localityType": {
                                              "oneOf": [
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "From the directory"
                                                      ]
                                                    },
                                                    "directory": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "source": "{{ context.uris.locality }}",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "CUATM",
                                                              "readOnly": true,
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                },
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "Other"
                                                      ]
                                                    },
                                                    "manual": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "other",
                                                              "readOnly": true,
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "const": "999999999",
                                                              "readOnly": true,
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "postalAddress": {
                                      "title": "Postal Address",
                                      "type": "object",
                                      "required": [
                                        "streetAddress"
                                      ],
                                      "properties": {
                                        "streetAddress": {
                                          "title": "Street Address",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "buyer::object/address::object/streetAddress::string"
                                        },
                                        "postalCode": {
                                          "title": "Postal Code",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "buyer::object/address::object/postalCode::string"
                                        }
                                      }
                                    }
                                  }
                                },
                                "identifier": {
                                  "title": "Main Identifier",
                                  "type": "object",
                                  "required": [
                                    "scheme",
                                    "id",
                                    "legalName",
                                    "uri"
                                  ],
                                  "properties": {
                                    "scheme": {
                                      "title": "Identification scheme",
                                      "type": "string",
                                      "source": "{{ context.uris.registrationScheme }}",
                                      "readOnly": true,
                                      "ocds": "buyer::object/identifier::object/scheme::string"
                                    },
                                    "id": {
                                      "title": "Identifier",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "buyer::object/identifier::object/id::string"
                                    },
                                    "legalName": {
                                      "title": "Legal Name",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "buyer::object/identifier::object/legalName::string"
                                    },
                                    "uri": {
                                      "title": "URI",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "buyer::object/identifier::object/uri::string"
                                    }
                                  }
                                },
                                "additionalIdentifiers": {
                                  "title": "Additional Identifiers",
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "scheme",
                                      "id",
                                      "legalName",
                                      "uri"
                                    ],
                                    "properties": {
                                      "scheme": {
                                        "title": "Additional identifier scheme",
                                        "type": "string",
                                        "source": "{{ context.uris.registrationScheme }}",
                                        "readOnly": true,
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/scheme::string"
                                      },
                                      "id": {
                                        "title": "Additional identifier ID",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/id::string"
                                      },
                                      "legalName": {
                                        "title": "Additional identifier legal name",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/legalName::string"
                                      },
                                      "uri": {
                                        "title": "Additional identifier URI",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/uri::string"
                                      }
                                    }
                                  }
                                },
                                "contactPoint": {
                                  "title": "Contact point",
                                  "type": "object",
                                  "properties": {
                                    "person": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "name",
                                        "url"
                                      ],
                                      "properties": {
                                        "name": {
                                          "title": "Name",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "buyer::object/contactPoint::object/name::string"
                                        },
                                        "url": {
                                          "title": "URL",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "buyer::object/contactPoint::object/url::string"
                                        }
                                      }
                                    },
                                    "contacts": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "telephone",
                                        "email"
                                      ],
                                      "properties": {
                                        "telephone": {
                                          "title": "Telephone",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "buyer::object/contactPoint::object/telephone::string"
                                        },
                                        "email": {
                                          "title": "E-mail",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "buyer::object/contactPoint::object/email::string"
                                        },
                                        "faxNumber": {
                                          "title": "Fax number",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "buyer::object/contactPoint::object/faxNumber::string"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                      {% elseif context.parameters.funder == "STATE" %}
                      {% elseif context.parameters.funder == "DONOR" %}
                        "fsFunder": {
                          "title": "Source of money - Donors Money",
                          "description": "Budget provided by external Donor",
                          "type": "object",
                          "properties": {
                            "donor": {
                              "type": "object",
                              "required": [
                                "name"
                              ],
                              "properties": {
                                "name": {
                                  "title": "Official Name",
                                  "type": "string",
                                  "ocds": "buyer::object/name::string"
                                },
                                "address": {
                                  "title": "Address",
                                  "type": "object",
                                  "properties": {
                                    "location": {
                                      "title": "Location",
                                      "type": "object",
                                      "properties": {
                                        "country": {
                                          "title": "Country",
                                          "type": "object",
                                          "source": "{{ context.uris.country }}",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "ocds": "buyer::object/address::object/addressDetails::object/country::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "ocds": "buyer::object/address::object/addressDetails::object/country::object/description::string"
                                            }
                                          }
                                        },
                                        "region": {
                                          "title": "Region",
                                          "type": "object",
                                          "source": "{{ context.uris.region }}",
                                          "dependentFields": {
                                            "country": "fsFunding.fsFunder.donor.address.location.country.id"
                                          },
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "ocds": "buyer::object/address::object/addressDetails::object/region::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "ocds": "buyer::object/address::object/addressDetails::object/region::object/description::string"
                                            }
                                          }
                                        },
                                        "locality": {
                                          "type": "object",
                                          "required": [
                                            "localityType"
                                          ],
                                          "properties": {
                                            "localityType": {
                                              "type": "string",
                                              "enum": [
                                                "From the directory",
                                                "Other"
                                              ]
                                            }
                                          },
                                          "dependencies": {
                                            "localityType": {
                                              "oneOf": [
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "From the directory"
                                                      ]
                                                    },
                                                    "directory": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "source": "{{ context.uris.locality }}",
                                                          "dependentFields": {
                                                            "country": "fsFunding.fsFunder.donor.address.location.country.id",
                                                            "region": "fsFunding.fsFunder.donor.address.location.region.id"
                                                          },
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "CUATM",
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                },
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "Other"
                                                      ]
                                                    },
                                                    "manual": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "other",
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "const": "999999999",
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "ocds": "buyer::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "postalAddress": {
                                      "title": "Postal Address",
                                      "type": "object",
                                      "required": [
                                        "streetAddress"
                                      ],
                                      "properties": {
                                        "streetAddress": {
                                          "title": "Street Address",
                                          "type": "string",
                                          "ocds": "buyer::object/address::object/streetAddress::string"
                                        },
                                        "postalCode": {
                                          "title": "Postal Code",
                                          "type": "string",
                                          "ocds": "buyer::object/address::object/postalCode::string"
                                        }
                                      }
                                    }
                                  }
                                },
                                "identifier": {
                                  "title": "Main Identifier",
                                  "type": "object",
                                  "required": [
                                    "scheme",
                                    "id",
                                    "legalName",
                                    "uri"
                                  ],
                                  "properties": {
                                    "scheme": {
                                      "title": "Identification scheme",
                                      "type": "string",
                                      "source": "{{ context.uris.registrationScheme }}",
                                      "dependentFields": {
                                        "country": "fsFunding.fsFunder.donor.address.location.country.id"
                                      },
                                      "ocds": "buyer::object/identifier::object/scheme::string"
                                    },
                                    "id": {
                                      "title": "Identifier",
                                      "type": "string",
                                      "ocds": "buyer::object/identifier::object/id::string"
                                    },
                                    "legalName": {
                                      "title": "Legal Name",
                                      "type": "string",
                                      "ocds": "buyer::object/identifier::object/legalName::string"
                                    },
                                    "uri": {
                                      "title": "URI",
                                      "type": "string",
                                      "ocds": "buyer::object/identifier::object/uri::string"
                                    }
                                  }
                                },
                                "additionalIdentifiers": {
                                  "title": "Additional Identifiers",
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "scheme",
                                      "id",
                                      "legalName",
                                      "uri"
                                    ],
                                    "properties": {
                                      "scheme": {
                                        "title": "Additional identifier scheme",
                                        "type": "string",
                                        "source": "{{ context.uris.registrationScheme }}",
                                        "dependentFields": {
                                          "country": "fsFunding.fsFunder.donor.address.location.country.id"
                                        },
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/scheme::string"
                                      },
                                      "id": {
                                        "title": "Additional identifier ID",
                                        "type": "string",
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/id::string"
                                      },
                                      "legalName": {
                                        "title": "Additional identifier legal name",
                                        "type": "string",
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/legalName::string"
                                      },
                                      "uri": {
                                        "title": "Additional identifier URI",
                                        "type": "string",
                                        "ocds": "buyer::object/additionalIdentifiers::array[object]/uri::string"
                                      }
                                    }
                                  }
                                },
                                "contactPoint": {
                                  "title": "Contact point",
                                  "type": "object",
                                  "properties": {
                                    "person": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "name",
                                        "url"
                                      ],
                                      "properties": {
                                        "name": {
                                          "title": "Name",
                                          "type": "string",
                                          "ocds": "buyer::object/contactPoint::object/name::string"
                                        },
                                        "url": {
                                          "title": "URL",
                                          "type": "string",
                                          "ocds": "buyer::object/contactPoint::object/url::string"
                                        }
                                      }
                                    },
                                    "contacts": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "telephone",
                                        "email"
                                      ],
                                      "properties": {
                                        "telephone": {
                                          "title": "Telephone",
                                          "type": "string",
                                          "ocds": "buyer::object/contactPoint::object/telephone::string"
                                        },
                                        "email": {
                                          "title": "E-mail",
                                          "type": "string",
                                          "ocds": "buyer::object/contactPoint::object/email::string"
                                        },
                                        "faxNumber": {
                                          "title": "Fax number",
                                          "type": "string",
                                          "ocds": "buyer::object/contactPoint::object/faxNumber::string"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                      {% endif %}
                      {% if context.parameters.payer == "BUYER" %}
                        "fsPayer": {
                          "title": "Money is paid by the - Buyer",
                          "description": "Payments will be provided by buyer from parent EI (via Treasury or directly). In that case 'buyer' in POST request should be empty. eNotice will take needed organization data from EI by itself",
                          "type": "object",
                          "properties": {
                            "buyer": {
                              "type": "object",
                              "required": [
                                "name"
                              ],
                              "properties": {
                                "name": {
                                  "title": "Official Name",
                                  "type": "string",
                                  "readOnly": true,
                                  "ocds": "tender::object/procuringEntity::object/name::string"
                                },
                                "address": {
                                  "title": "Address",
                                  "type": "object",
                                  "properties": {
                                    "location": {
                                      "title": "Location",
                                      "type": "object",
                                      "properties": {
                                        "country": {
                                          "title": "Country",
                                          "type": "object",
                                          "source": "{{ context.uris.country }}",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/country::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/country::object/description::string"
                                            }
                                          }
                                        },
                                        "region": {
                                          "title": "Region",
                                          "type": "object",
                                          "source": "{{ context.uris.region }}",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/region::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/region::object/description::string"
                                            }
                                          }
                                        },
                                        "locality": {
                                          "type": "object",
                                          "required": [
                                            "localityType"
                                          ],
                                          "properties": {
                                            "localityType": {
                                              "type": "string",
                                              "enum": [
                                                "From the directory",
                                                "Other"
                                              ],
                                              "readOnly": true
                                            }
                                          },
                                          "dependencies": {
                                            "localityType": {
                                              "oneOf": [
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "From the directory"
                                                      ]
                                                    },
                                                    "directory": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "source": "{{ context.uris.locality }}",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "CUATM",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                },
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "Other"
                                                      ]
                                                    },
                                                    "manual": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "other",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "const": "999999999",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "postalAddress": {
                                      "title": "Postal Address",
                                      "type": "object",
                                      "required": [
                                        "streetAddress"
                                      ],
                                      "properties": {
                                        "streetAddress": {
                                          "title": "Street Address",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/address::object/streetAddress::string"
                                        },
                                        "postalCode": {
                                          "title": "Postal Code",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/address::object/postalCode::string"
                                        }
                                      }
                                    }
                                  }
                                },
                                "identifier": {
                                  "title": "Main Identifier",
                                  "type": "object",
                                  "required": [
                                    "scheme",
                                    "id",
                                    "legalName",
                                    "uri"
                                  ],
                                  "properties": {
                                    "scheme": {
                                      "title": "Identification scheme",
                                      "type": "string",
                                      "source": "{{ context.uris.registrationScheme }}",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/scheme::string"
                                    },
                                    "id": {
                                      "title": "Identifier",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/id::string"
                                    },
                                    "legalName": {
                                      "title": "Legal Name",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/legalName::string"
                                    },
                                    "uri": {
                                      "title": "URI",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/uri"
                                    }
                                  }
                                },
                                "additionalIdentifiers": {
                                  "title": "Additional Identifiers",
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "scheme",
                                      "id",
                                      "legalName",
                                      "uri"
                                    ],
                                    "properties": {
                                      "scheme": {
                                        "title": "Additional identifier scheme",
                                        "type": "string",
                                        "source": "{{ context.uris.registrationScheme }}",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/scheme::string"
                                      },
                                      "id": {
                                        "title": "Additional identifier ID",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/id::string"
                                      },
                                      "legalName": {
                                        "title": "Additional identifier legal name",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/legalName::string"
                                      },
                                      "uri": {
                                        "title": "Additional identifier URI",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/uri::string"
                                      }
                                    }
                                  }
                                },
                                "contactPoint": {
                                  "title": "Contact point",
                                  "type": "object",
                                  "properties": {
                                    "person": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "name",
                                        "url"
                                      ],
                                      "properties": {
                                        "name": {
                                          "title": "Name",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/name::string"
                                        },
                                        "url": {
                                          "title": "URL",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/url::string"
                                        }
                                      }
                                    },
                                    "contacts": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "telephone",
                                        "email"
                                      ],
                                      "properties": {
                                        "telephone": {
                                          "title": "Telephone",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/telephone::string"
                                        },
                                        "email": {
                                          "title": "E-mail",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/email::string"
                                        },
                                        "faxNumber": {
                                          "title": "Fax number",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/faxNumber::string"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      {% elseif context.parameters.payer == "THIRDPARTY" %}
                        "fsPayer": {
                          "title": "Money is paid by the - Third Party",
                          "description": "Payments will be provided by Treasury",
                          "type": "object",
                          "properties": {
                            "thirdParty": {
                              "type": "object",
                              "required": [
                                "name"
                              ],
                              "properties": {
                                "name": {
                                  "title": "Official Name",
                                  "type": "string",
                                  "ocds": "tender::object/procuringEntity::object/name::string"
                                },
                                "address": {
                                  "title": "Address",
                                  "type": "object",
                                  "properties": {
                                    "location": {
                                      "title": "Location",
                                      "type": "object",
                                      "properties": {
                                        "country": {
                                          "title": "Country",
                                          "type": "object",
                                          "source": "{{ context.uris.country }}",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/country::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/country::object/description::string"
                                            }
                                          }
                                        },
                                        "region": {
                                          "title": "Region",
                                          "type": "object",
                                          "source": "{{ context.uris.region }}",
                                          "dependentFields": {
                                            "country": "fsFunding.fsPayer.thirdParty.address.location.country.id"
                                          },
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/region::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/region::object/description::string"
                                            }
                                          }
                                        },
                                        "locality": {
                                          "type": "object",
                                          "required": [
                                            "localityType"
                                          ],
                                          "properties": {
                                            "localityType": {
                                              "type": "string",
                                              "enum": [
                                                "From the directory",
                                                "Other"
                                              ]
                                            }
                                          },
                                          "dependencies": {
                                            "localityType": {
                                              "oneOf": [
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "From the directory"
                                                      ]
                                                    },
                                                    "directory": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "source": "{{ context.uris.locality }}",
                                                          "dependentFields": {
                                                            "country": "fsFunding.fsPayer.thirdParty.address.location.country.id",
                                                            "region": "fsFunding.fsPayer.thirdParty.address.region.id"
                                                          },
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "CUATM",
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                },
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "Other"
                                                      ]
                                                    },
                                                    "manual": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "other",
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "const": "999999999",
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "postalAddress": {
                                      "title": "Postal Address",
                                      "type": "object",
                                      "required": [
                                        "streetAddress"
                                      ],
                                      "properties": {
                                        "streetAddress": {
                                          "title": "Street Address",
                                          "type": "string",
                                          "ocds": "tender::object/procuringEntity::object/address::object/streetAddress::string"
                                        },
                                        "postalCode": {
                                          "title": "Postal Code",
                                          "type": "string",
                                          "ocds": "tender::object/procuringEntity::object/address::object/postalCode::string"
                                        }
                                      }
                                    }
                                  }
                                },
                                "identifier": {
                                  "title": "Main Identifier",
                                  "type": "object",
                                  "required": [
                                    "scheme",
                                    "id",
                                    "legalName",
                                    "uri"
                                  ],
                                  "properties": {
                                    "scheme": {
                                      "title": "Identification scheme",
                                      "type": "string",
                                      "source": "{{ context.uris.registrationScheme }}",
                                      "dependentFields": {
                                        "country": "fsFunding.fsPayer.thirdParty.address.location.country.id"
                                      },
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/scheme::string"
                                    },
                                    "id": {
                                      "title": "Identifier",
                                      "type": "string",
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/id::string"
                                    },
                                    "legalName": {
                                      "title": "Legal Name",
                                      "type": "string",
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/legalName::string"
                                    },
                                    "uri": {
                                      "title": "URI",
                                      "type": "string",
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/uri"
                                    }
                                  }
                                },
                                "additionalIdentifiers": {
                                  "title": "Additional Identifiers",
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "scheme",
                                      "id",
                                      "legalName",
                                      "uri"
                                    ],
                                    "properties": {
                                      "scheme": {
                                        "title": "Additional identifier scheme",
                                        "type": "string",
                                        "source": "{{ context.uris.registrationScheme }}",
                                        "dependentFields": {
                                          "country": "fsFunding.fsPayer.thirdParty.address.location.country.id"
                                        },
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/scheme::string"
                                      },
                                      "id": {
                                        "title": "Additional identifier ID",
                                        "type": "string",
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/id::string"
                                      },
                                      "legalName": {
                                        "title": "Additional identifier legal name",
                                        "type": "string",
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/legalName::string"
                                      },
                                      "uri": {
                                        "title": "Additional identifier URI",
                                        "type": "string",
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/uri::string"
                                      }
                                    }
                                  }
                                },
                                "contactPoint": {
                                  "title": "Contact point",
                                  "type": "object",
                                  "properties": {
                                    "person": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "name",
                                        "url"
                                      ],
                                      "properties": {
                                        "name": {
                                          "title": "Name",
                                          "type": "string",
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/name::string"
                                        },
                                        "url": {
                                          "title": "URL",
                                          "type": "string",
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/url::string"
                                        }
                                      }
                                    },
                                    "contacts": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "telephone",
                                        "email"
                                      ],
                                      "properties": {
                                        "telephone": {
                                          "title": "Telephone",
                                          "type": "string",
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/telephone::string"
                                        },
                                        "email": {
                                          "title": "E-mail",
                                          "type": "string",
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/email::string"
                                        },
                                        "faxNumber": {
                                          "title": "Fax number",
                                          "type": "string",
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/faxNumber::string"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      {% elseif context.parameters.payer == "FUNDER" %}
                        "fsPayer": {
                          "title": "Money is paid by the - Funder",
                          "description": "Payments will be provided by funder",
                          "type": "object",
                          "properties": {
                            "funder": {
                              "type": "object",
                              "required": [
                                "name"
                              ],
                              "properties": {
                                "name": {
                                  "title": "Official Name",
                                  "type": "string",
                                  "readOnly": true,
                                  "ocds": "tender::object/procuringEntity::object/name::string"
                                },
                                "address": {
                                  "title": "Address",
                                  "type": "object",
                                  "properties": {
                                    "location": {
                                      "title": "Location",
                                      "type": "object",
                                      "properties": {
                                        "country": {
                                          "title": "Country",
                                          "type": "object",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/country::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/country::object/description::string"
                                            }
                                          }
                                        },
                                        "region": {
                                          "title": "Region",
                                          "type": "object",
                                          "required": [
                                            "id",
                                            "description"
                                          ],
                                          "properties": {
                                            "id": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/region::object/id::string"
                                            },
                                            "description": {
                                              "type": "string",
                                              "readOnly": true,
                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/region::object/description::string"
                                            }
                                          }
                                        },
                                        "locality": {
                                          "type": "object",
                                          "required": [
                                            "localityType"
                                          ],
                                          "properties": {
                                            "localityType": {
                                              "type": "string",
                                              "enum": [
                                                "From the directory",
                                                "Other"
                                              ],
                                              "readOnly": true
                                            }
                                          },
                                          "dependencies": {
                                            "localityType": {
                                              "oneOf": [
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "From the directory"
                                                      ]
                                                    },
                                                    "directory": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "type": "object",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "CUATM",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                },
                                                {
                                                  "required": [
                                                    "localityType"
                                                  ],
                                                  "properties": {
                                                    "localityType": {
                                                      "enum": [
                                                        "Other"
                                                      ]
                                                    },
                                                    "manual": {
                                                      "type": "object",
                                                      "properties": {
                                                        "locality": {
                                                          "title": "Locality",
                                                          "type": "object",
                                                          "required": [
                                                            "scheme",
                                                            "id",
                                                            "description"
                                                          ],
                                                          "properties": {
                                                            "scheme": {
                                                              "type": "string",
                                                              "const": "other",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/scheme::string"
                                                            },
                                                            "id": {
                                                              "type": "string",
                                                              "const": "999999999",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/id::string"
                                                            },
                                                            "description": {
                                                              "type": "string",
                                                              "readOnly": true,
                                                              "ocds": "tender::object/procuringEntity::object/address::object/addressDetails::object/locality::object/description::string"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "postalAddress": {
                                      "title": "Postal Address",
                                      "type": "object",
                                      "required": [
                                        "streetAddress"
                                      ],
                                      "properties": {
                                        "streetAddress": {
                                          "title": "Street Address",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/address::object/streetAddress::string"
                                        },
                                        "postalCode": {
                                          "title": "Postal Code",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/address::object/postalCode::string"
                                        }
                                      }
                                    }
                                  }
                                },
                                "identifier": {
                                  "title": "Main Identifier",
                                  "type": "object",
                                  "required": [
                                    "scheme",
                                    "id",
                                    "legalName",
                                    "uri"
                                  ],
                                  "properties": {
                                    "scheme": {
                                      "title": "Identification scheme",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/scheme::string"
                                    },
                                    "id": {
                                      "title": "Identifier",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/id::string"
                                    },
                                    "legalName": {
                                      "title": "Legal Name",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/legalName::string"
                                    },
                                    "uri": {
                                      "title": "URI",
                                      "type": "string",
                                      "readOnly": true,
                                      "ocds": "tender::object/procuringEntity::object/identifier::object/uri"
                                    }
                                  }
                                },
                                "additionalIdentifiers": {
                                  "title": "Additional Identifiers",
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "scheme",
                                      "id",
                                      "legalName",
                                      "uri"
                                    ],
                                    "properties": {
                                      "scheme": {
                                        "title": "Additional identifier scheme",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/scheme::string"
                                      },
                                      "id": {
                                        "title": "Additional identifier ID",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/id::string"
                                      },
                                      "legalName": {
                                        "title": "Additional identifier legal name",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/legalName::string"
                                      },
                                      "uri": {
                                        "title": "Additional identifier URI",
                                        "type": "string",
                                        "readOnly": true,
                                        "ocds": "tender::object/procuringEntity::object/additionalIdentifiers::array[object]/uri::string"
                                      }
                                    }
                                  }
                                },
                                "contactPoint": {
                                  "title": "Contact point",
                                  "type": "object",
                                  "properties": {
                                    "person": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "name",
                                        "url"
                                      ],
                                      "properties": {
                                        "name": {
                                          "title": "Name",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/name::string"
                                        },
                                        "url": {
                                          "title": "URL",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/url::string"
                                        }
                                      }
                                    },
                                    "contacts": {
                                      "title": "Contact person",
                                      "type": "object",
                                      "required": [
                                        "telephone",
                                        "email"
                                      ],
                                      "properties": {
                                        "telephone": {
                                          "title": "Telephone",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/telephone::string"
                                        },
                                        "email": {
                                          "title": "E-mail",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/email::string"
                                        },
                                        "faxNumber": {
                                          "title": "Fax number",
                                          "type": "string",
                                          "readOnly": true,
                                          "ocds": "tender::object/procuringEntity::object/contactPoint::object/faxNumber::string"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      {% endif %}
        }
      },
      "fsBudget": {
        "title": "Budget",
        "type": "object",
        "properties": {
          "rationale": {
            "title": "Rationale",
            "type": "string",
            "ocds": "planning::object/rationale::string"
          },
          "budgetDetails": {
            "title": "Budget details",
            "type": "object",
            "properties": {
              "description": {
                "title": "Description",
                "description": "A short free text description of the budget source",
                "type": "string",
                "ocds": "planning::object/budget::object/description::string"
              },
              "id": {
                "title": "Budget ID",
                "description": "An identifier for the budget line item",
                "type": "string",
                "ocds": "planning::object/budget::object/id::string"
              }
            }
          },
          "budgetAmount": {
            "title": "Budget Amount",
            "type": "object",
            "required": [
              "amount",
              "currency"
            ],
            "properties": {
              "amount": {
                "title": "Value",
                "type": "number",
                "minimum": 0.01,
                "multipleOf": 0.01,
                "ocds": "planning::object/budget::object/amount::object/amount::number"
              },
              "currency": {
                "title": "Currency",
                "type": "string",
                "source": "{{ context.uris.currency }}",
                          {% if context.budget.amount is not null %}
                            "readOnly": true,
                          {% endif %}
                "ocds": "planning::object/budget::object/amount::object/currency::string"
              }
            }
          },
          "budgetPeriod": {
            "title": "Budget Period",
            "type": "object",
            "required": [
              "startDate",
              "endDate"
            ],
            "properties": {
              "startDate": {
                "title": "From",
                "type": "string",
                "ocds": "planning::object/budget::object/period::object/startDate::string"
              },
              "endDate": {
                "title": "To",
                "type": "string",
                "ocds": "planning::object/budget::object/period::object/endDate::string"
              }
            }
          },
          "budgetProject": {
            "title": "Project",
            "type": "object",
            "properties": {
              "projectDetails": {
                "title": "Project Details",
                "type": "object",
                "properties": {
                  "project": {
                    "title": "Project name",
                    "type": "string",
                    "ocds": "planning::object/budget::object/project::string"
                  },
                  "projectID": {
                    "title": "Project ID",
                    "type": "string",
                    "ocds": "planning::object/budget::object/projectID::string"
                  },
                  "uri": {
                    "title": "Project URI",
                    "type": "string",
                    "ocds": "planning::object/budget::object/uri::string"
                  },
                  "EUfunded": {
                    "type": "object",
                    "required": [
                      "isEUfunded"
                                {% if context.parameters.europeanUnionFunded == true %}
                                ,
                                  "projectIdentifier",
                                  "projectName"
                                {% endif %}
                    ],
                    "properties": {
                      "isEUfunded": {
                        "title": "Is European Union Funded",
                        "type": "boolean",
                        "enum": [
                          true,
                          false
                        ],
                        "enumNames": [
                          "Yes, it is",
                          "No, it isn't"
                        ],
                        "enumDesc": [
                          "This budget is related to a project and/or programme financed by EU funds",
                          "This budget is not related to a project and/or programme financed by EU funds"
                        ],
                        "readOnly": true,
                        "ocds": "planning::object/budget::object/isEuropeanUnionFunded::boolean"
                      }
                                  {% if context.parameters.europeanUnionFunded == true %}
                                  ,
                                    "projectIdentifier": {
                                      "title": "Project Identifier",
                                      "description": "National identifier of the EU project providing partial or full funding",
                                      "type": "string",
                                      "ocds": "planning::object/budget::object/europeanUnionFunding::object/projectIdentifier::string"
                                    },
                                    "projectName": {
                                      "title": "Project Name",
                                      "description": "Name or other national identification of the project providing full or partial funding.",
                                      "type": "string",
                                      "ocds": "planning::object/budget::object/europeanUnionFunding::object/projectName::string"
                                    },
                                    "uri": {
                                      "title": "Project URI",
                                      "description": "URI of the project providing full or partial funding.",
                                      "type": "string",
                                      "ocds": "planning::object/budget::object/europeanUnionFunding::object/uri::string"
                                    }
                                  {% endif %}
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "data": {
    "fsParent": {
      "eiOCID": "{{ context.ei.ocid }}",
      "eiTitle": "{{ context.ei.title }}"
                {{ commaIf(context.ei.description) }}
                {{ strtingAttributeIf(name = "eiDescription", value = context.ei.description) }},
      "eiBudgetPeriod": {
        "startDate": "{{ context.ei.budgetPeriod.startDate }}",
        "endDate": "{{ context.ei.budgetPeriod.endDate }}"
      },
      "eiClassification": {
        "scheme": "{{ context.ei.classification.scheme }}",
        "id": "{{ context.ei.classification.id }}",
        "description": "{{ context.ei.classification.description }}"
      }
    },
          {% if context.parameters.funder == "BUYER" or context.parameters.payer == "BUYER" %}
            "fsFunding": {
                         {% if context.parameters.funder == "BUYER" %}
                           "fsFunder": {
                             "buyer": {
                               "name": "{{ context.buyer.name }}",
                               "address": {
                                 "location": {
                                   "country": {
                                     "id": "{{ context.buyer.address.country.id }}",
                                     "description": "{{ context.buyer.address.country.description }}"
                                   },
                                   "region": {
                                     "id": "{{ context.buyer.address.region.id }}",
                                     "description": "{{ context.buyer.address.region.description }}"
                                   },
                                   "locality": {
                                               {% if context.buyer.address.locality.scheme == "CUATM" %}
                                                 "localityType": "From the directory",
                                                 "directory": {
                                                   "locality": {
                                                     "scheme": "{{ context.buyer.address.locality.scheme }}",
                                                     "id": "{{ context.buyer.address.locality.id }}",
                                                     "description": "{{ context.buyer.address.locality.description }}"
                                                   }
                                                 }
                                               {% else %}
                                                 "localityType": "Other",
                                                 "manual": {
                                                   "locality": {
                                                     "scheme": "{{ context.buyer.address.locality.scheme }}",
                                                     "id": "{{ context.buyer.address.locality.id }}",
                                                     "description": "{{ context.buyer.address.locality.description }}"
                                                   }
                                                 }
                                               {% endif %}
                                   }
                                 },
                                 "postalAddress": {
                                   "streetAddress": "{{ context.buyer.address.streetAddress }}"
                                                  {{ commaIf(context.buyer.address.postalCode) }}
                                                  {{ stringAttributeIf(name = "postalCode", value = context.buyer.address.postalCode) }}
                                 }
                               },
                               "identifier": {
                                 "scheme": "{{ context.buyer.identifier.scheme }}",
                                 "id": "{{ context.buyer.identifier.id }}",
                                 "legalName": "{{ context.buyer.identifier.legalName }}"
                                             {{ commaIf(context.buyer.identifier.uri) }}
                                             {{ stringAttributeIf(name = "uri", value = context.buyer.identifier.uri) }}
                               },
                                      {% if context.buyer.additionalIdentifiers != null %}
                                        "additionalIdentifiers": [
                                                                 {% for additionalIdentifier in context.buyer.additionalIdentifiers %}
                                                                   {% if loop.index  > 0 %},{% endif %}
                                                                   {
                                                                     "scheme": "{{ additionalIdentifier.scheme }}",
                                                                     "id": "{{ additionalIdentifier.id }}",
                                                                     "legalName": "{{ additionalIdentifier.legalName }}"
                                                                     {{ commaIf(additionalIdentifier.uri) }}
                                                                     {{ stringAttributeIf(name = "uri", value = additionalIdentifier.uri) }}
                                                                   }
                                                                 {% endfor %}
                                        ],
                                      {% endif %}
                               "contactPoint": {
                                 "person": {
                                   "name": "{{ context.buyer.contactPoint.name }}",
                                   "url": "{{ context.buyer.contactPoint.url }}"
                                 },
                                 "contacts": {
                                   "telephone": "{{ context.buyer.contactPoint.telephone }}",
                                   "email": "{{ context.buyer.contactPoint.email }}"
                                             {{ commaIf(context.buyer.contactPoint.faxNumber) }}
                                             {{ stringAttributeIf(name = "faxNumber", value = context.buyer.contactPoint.faxNumber) }}
                                 }
                               }
                             }
                           }
                         {% endif %}
                         {% if context.parameters.funder == "BUYER" and context.parameters.payer == "BUYER" %},{% endif %}
                         {% if context.parameters.payer == "BUYER" %}
                           "fsPayer": {
                             "buyer": {
                               "name": "{{ context.buyer.name }}",
                               "address": {
                                 "location": {
                                   "country": {
                                     "id": "{{ context.buyer.address.country.id }}",
                                     "description": "{{ context.buyer.address.country.description }}"
                                   },
                                   "region": {
                                     "id": "{{ context.buyer.address.region.id }}",
                                     "description": "{{ context.buyer.address.region.description }}"
                                   },
                                   "locality": {
                                               {% if context.buyer.address.locality.scheme == "CUATM" %}
                                                 "localityType": "From the directory",
                                                 "directory": {
                                                   "locality": {
                                                     "scheme": "{{ context.buyer.address.locality.scheme }}",
                                                     "id": "{{ context.buyer.address.locality.id }}",
                                                     "description": "{{ context.buyer.address.locality.description }}"
                                                   }
                                                 }
                                               {% else %}
                                                 "localityType": "Other",
                                                 "manual": {
                                                   "locality": {
                                                     "scheme": "{{ context.buyer.address.locality.scheme }}",
                                                     "id": "{{ context.buyer.address.locality.id }}",
                                                     "description": "{{ context.buyer.address.locality.description }}"
                                                   }
                                                 }
                                               {% endif %}
                                   }
                                 },
                                 "postalAddress": {
                                   "streetAddress": "{{ context.buyer.address.streetAddress }}"
                                                  {{ commaIf(context.buyer.address.postalCode) }}
                                                  {{ stringAttributeIf(name = "postalCode", value = context.buyer.address.postalCode) }}
                                 }
                               },
                               "identifier": {
                                 "scheme": "{{ context.buyer.identifier.scheme }}",
                                 "id": "{{ context.buyer.identifier.id }}",
                                 "legalName": "{{ context.buyer.identifier.legalName }}"
                                             {{ commaIf(context.buyer.identifier.uri) }}
                                             {{ stringAttributeIf(name = "uri", value = context.buyer.identifier.uri) }}
                               },
                                      {% if context.buyer.additionalIdentifiers != null %}
                                        "additionalIdentifiers": [
                                                                 {% for additionalIdentifier in context.buyer.additionalIdentifiers %}
                                                                   {% if loop.index  > 0 %},{% endif %}
                                                                   {
                                                                     "scheme": "{{ additionalIdentifier.scheme }}",
                                                                     "id": "{{ additionalIdentifier.id }}",
                                                                     "legalName": "{{ additionalIdentifier.legalName }}"
                                                                     {{ commaIf(additionalIdentifier.uri) }}
                                                                     {{ stringAttributeIf(name = "uri", value = additionalIdentifier.uri) }}
                                                                   }
                                                                 {% endfor %}
                                        ],
                                      {% endif %}
                               "contactPoint": {
                                 "person": {
                                   "name": "{{ context.buyer.contactPoint.name }}",
                                   "url": "{{ context.buyer.contactPoint.url }}"
                                 },
                                 "contacts": {
                                   "telephone": "{{ context.buyer.contactPoint.telephone }}",
                                   "email": "{{ context.buyer.contactPoint.email }}"
                                             {{ commaIf(context.buyer.contactPoint.faxNumber) }}
                                             {{ stringAttributeIf(name = "faxNumber", value = context.buyer.contactPoint.faxNumber) }}
                                 }
                               }
                             }
                           }
                         {% endif %}
            },
          {% endif %}
    "fsBudget": {
                {% if context.budget.amount is not null %}
                  "budgetAmount": {
                    "currency": "{{ context.budget.amount.currency }}"
                  },
                {% endif %}
      "budgetProject": {
        "projectDetails": {
          "EUfunded": {
            "isEUfunded": {{ context.parameters.europeanUnionFunded }}
          }
        }
      }
    }
  }
}